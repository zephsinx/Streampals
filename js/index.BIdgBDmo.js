(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();const U=30,H=90,S=5,j="25",P="25",L="Unable to calculate media duration for the requested media. Please set the media duration (in seconds) via the `mediaDuration` parameter. Parameter supports decimal values.",q="Unable to determine content type of from media URL. Defaulting to `img` tag",O='Content type not yet supported. Defaulting to `img` tag". Content type found: `{0}`',$="Error fetching image from URL '{0}'. Error status: '{1}'",d=Object.freeze({DefaultMinMinutes:U,DefaultMaxMinutes:H,DefaultMaxHeight:j,DefaultMaxWidth:P,DefaultMediaDurationSeconds:S,ZeroMediaDurationWarning:L,ContentTypeNotFoundError:q,ContentTypeNotSupportedError:O,FetchImageError:$}),R=function(e,t,a){let i,n,r,o,l,p=window.innerHeight,c=window.innerWidth,s=p*.5,m=c*.5;do l=Math.floor(Math.random()*4);while(l===e);do r=Math.floor(Math.random()*m);while(r+a>m);do o=Math.floor(Math.random()*s);while(o+t>s);return i=l%2===0?r:m+r,n=l<2?o:s+o,{quadrant:l,left:`${i}px`,top:`${n}px`}},V=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},E={getMediaCoordinateStyles:R,randomIntFromInterval:V},x=d.DefaultMediaDurationSeconds*1e3,C=d.DefaultMinMinutes*60*1e3,T=d.DefaultMaxMinutes*60*1e3,W="/media/worms.gif",M=document.getElementById("media-div");let D,f,u,w=!0;Z().then(e=>{u=e,D=G(u.contentType),f=Y(D,u)}).then(()=>{M.appendChild(f),f.onload=()=>{f.onload=null,b(f)}});function b(e){let t=E.randomIntFromInterval(u.minDelay,u.maxDelay);w&&(F(e),t=0,w=!1),setTimeout(()=>{D==="img"?N(e,u):(e.currentTime=0,e.play()),M.style.visibility="visible",setTimeout(()=>{M.style.visibility="hidden",F(e),b(e)},u.mediaDuration)},t)}let v;function F(e){let t=E.getMediaCoordinateStyles(v,e.height,e.width);v=t.quadrant,e.style.left=t.left,e.style.top=t.top}function N(e,t){if(e.src="",t.randomImage){let a=Math.floor(Math.random()*t.mediaPaths.length);e.src=t.mediaPaths[a]}else e.src=t.mediaUrl}async function Z(){let e=z(),t=await A(e);return J(t)}function z(){return new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t||"")})}async function A(e){const t=e.skipDelay==="true",a=I(t,e.max,T),i=I(t,e.min,C),n=h(e.maxHeight)?e.maxHeight:d.DefaultMaxHeight,r=h(e.maxWidth)?e.maxWidth:d.DefaultMaxWidth;let o=e.randomImage===void 0||e.randomImage===null?!0:e.randomImage==="true";const l=await B(e.mediaUrl),p=l.mediaPaths||[];let c=Q(l.mediaPath,l.mediaPaths,o),s=e.mediaDuration,m=c.split(".").pop().split("?")[0],g=k(m);if(!h(s)||g===""){let y;try{y=await K(c),g===""&&(g=y.contentType),h(s)||(s=y.duration)}catch{console.log(`Using default media duration of ${x} milliseconds`),s=x}}return{skipDelay:t,maxDelay:a,minDelay:i,maxHeight:n,maxWidth:r,mediaUrl:c,mediaPaths:p,mediaDuration:s,contentType:g,randomImage:o}}async function B(e){return e?{mediaPath:e,mediaPaths:[]}:await fetch("/media/media.json").then(a=>a.ok?a.json():Promise.reject(a)).catch(a=>{console.log(a)})||{mediaPath:W,mediaPaths:[]}}function Q(e,t,a){if(e)return e;if(t.length>0){if(a){const i=Math.floor(Math.random()*t.length);return t[i]}return t[0]}return W}function J(e){if(e.maxDelayMillis<e.minDelayMillis&&(e.maxDelayMillis=T,e.minDelayMillis=C),e.mediaDuration===0)throw new Error(d.ZeroMediaDurationWarning);return e}function I(e,t,a){return e?0:h(t)?t*60*1e3:a}function h(e){return!isNaN(e)&&!isNaN(parseFloat(e))&&parseFloat(e)>0}async function K(e){let t,a=await fetch(e).then(i=>i.ok?(t=i.headers.get("Content-Type"),Promise.resolve(i)):Promise.reject(i)).then(i=>i.arrayBuffer()).then(i=>X(new Uint8Array(i))).catch(i=>{throw new Error(d.FetchImageError.replace("{0}",e).replace("{1}",`${i.status} - ${i.statusText}`))});return{contentType:t,duration:a}}function X(e){let t=0;for(let a=0;a<e.length;a++)if(e[a]===33&&e[a+1]===249&&e[a+2]===4&&e[a+7]===0){const i=e[a+5]<<8|e[a+4];t+=i<2?10:i}return t*10}function Y(e,t){let a=document.createElement(e);switch(a.id="rendered-media",a.style.objectFit="contain",a.style.maxHeight=t.maxHeight+"%",a.style.maxWidth=t.maxWidth+"%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.alt="Just a lil' stream pal",e){case"img":return N(a,t),a;case"video":return _(a,t);default:throw new Error(`Tag name ${e} not recognized`)}}function k(e){switch(e){case"avif":return"image/avif";case"gif":return"image/gif";case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"svg":return"image/svg+xml";case"webp":return"image/webp";case"webm":return"video/webm";default:return""}}function G(e){switch(e){case"image/avif":case"image/gif":case"image/jpeg":case"image/png":case"image/svg+xml":case"image/webp":case e.startsWith("image/"):return"img";case"video/webm":case e.startsWith("video/"):return"video";default:return console.warn(e?d.ContentTypeNotSupportedError.replace("{0}",e):d.ContentTypeNotFoundError),"img"}}function _(e,t){let a=document.createElement("source");return a.src=t.mediaUrl,a.type=t.contentType,e.autoplay=!0,e.appendChild(a),e}
//# sourceMappingURL=index.BIdgBDmo.js.map
